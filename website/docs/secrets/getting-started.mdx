---
title: Getting Started
hide_title: true
---

import TierLabel from "./../_components/TierLabel";
import AlphaWarning from "../_components/_alpha_warning.mdx";

# Getting started with secrets management <TierLabel tiers="Enterprise" />

<AlphaWarning/>

This guide shows you a basic experience for using weave gitops secrets management.
We will be showing how to setup the capability for a dev or test environment and how to use it for your applications.

## Requirements
- You have a test wge environment with flux installed.
- You have a secret in AWS secrets manager.
- You have an application that requires to use that secret.

## Add the secrets management infrastructure

For more complete scenario see [operator](/Users/enekofb/projects/github.com/weaveworks/weave-gitops/website/docs/secrets/setup-secrets-operator.mdx)
For an example with sops [XYZ](/Users/enekofb/projects/github.com/weaveworks/weave-gitops/website/docs/secrets/setup-secrets-operator.mdx)

Install external-secrets profile

```yaml
apiVersion: source.toolkit.fluxcd.io/v1beta2
kind: HelmRepository
metadata:
  name: weaveworks-charts
  namespace: flux-system
spec:
  interval: 1m0s
  provider: generic
  timeout: 1m0s
  url: https://weaveworks.github.io/weave-gitops-profile-examples/
---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  labels:
    weave.works/applied-layer: layer-0
  name: external-secrets
  namespace: flux-system
spec:
  interval: 1m0s
  chart:
    spec:
      chart: external-secrets
      sourceRef:
        apiVersion: source.toolkit.fluxcd.io/v1beta2
        kind: HelmRepository
        name: weaveworks-charts
        namespace: flux-system
  install:
    crds: CreateReplace
    createNamespace: true
```

See how it is available in your cluster
![setup infra](imgs/getting-started-setup-infra.png)

And add the configuration to manage external stores

```yaml
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  labels:
    weave.works/applied-layer: layer-0
  name: external-secrets-store-config
  namespace: flux-system
spec:
  interval: 1m0s
  chart:
    spec:
      chart: secrets-store-config
      sourceRef:
        apiVersion: source.toolkit.fluxcd.io/v1beta2
        kind: HelmRepository
        name: weaveworks-charts
        namespace: flux-system
  values:
    secretStores:
     aws-secrets-manager:
         provider:
           aws:
             service: SecretsManager
             region: us-east-1
             auth:
               secretRef:
                 accessKeyIDSecretRef:
                   name: awssm-secret
                   key: access-key
                 secretAccessKeySecretRef:
                   name: awssm-secret
                   key: secret-access-key
```
![setup secret stores](imgs/getting-started-setup-config.png)

## Create a secret

```yaml
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: example-secret
  namespace: flux-system
spec:
  data:
  - remoteRef:
      conversionStrategy: Default
      decodingStrategy: None
      key: provider-key
      property: provider-key-property
      version: provider-key-version
    secretKey: secret-key-to-be-managed
  dataFrom:
  - extract:
      conversionStrategy: Default
      decodingStrategy: None
      key: remote-key-in-the-provider
  refreshInterval: 1h0m0s
  secretStoreRef:
    kind: SecretStore
    name: aws-secrets-manager
  target:
    name: secret-to-be-created
```

For other scenarios see [WZY](/Users/enekofb/projects/github.com/weaveworks/weave-gitops/website/docs/secrets/setup-secrets-operator.mdx)

## Manage through the UI


![setup secret stores](imgs/getting-started-secret.png)


For other scenarios see [WZY](/Users/enekofb/projects/github.com/weaveworks/weave-gitops/website/docs/secrets/setup-secrets-operator.mdx)




